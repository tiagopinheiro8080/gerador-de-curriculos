<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Currículos Pro A4</title>
    
    <!-- Tailwind CSS para a interface do editor -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- html2pdf.js para gerar o PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- Fontes Google para os Templates -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Montserrat:wght@300;400;600;700&family=Open+Sans:wght@400;600&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- Configurações Gerais da Interface --- */
        body {
            background-color: #111827; /* gray-900 */
            height: 100vh;
            overflow: hidden; /* O conteúdo rola dentro dos painéis */
            font-family: 'Inter', sans-serif;
            color: #e5e7eb; /* gray-200 */
        }

        /* --- Estilização de Inputs para Dark Mode --- */
        .input-dark {
            background-color: #1f2937; /* gray-800 */
            border: 1px solid #374151; /* gray-700 */
            color: #f3f4f6; /* gray-100 */
            transition: all 0.2s;
        }
        .input-dark:focus {
            outline: none;
            border-color: #60a5fa; /* blue-400 */
            box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.2);
        }
        .input-dark::placeholder {
            color: #9ca3af; /* gray-400 */
        }

        /* --- Simulação da Folha A4 na Tela --- */
        .a4-container {
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            background: white;
            color: #1f2937; /* Reset text color for resume content */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
            /* Padding seguro para impressão */
            padding: 15mm; 
            box-sizing: border-box;
            position: relative; /* Necessário para o posicionamento absoluto da assinatura */
            overflow: hidden; /* Conteúdo extra gera nova página na lógica de impressão */
        }

        /* --- Estilos Específicos dos Templates --- */
        
        /* Utilitários de Impressão */
        .page-break { page-break-before: always; }
        .no-break { page-break-inside: avoid; break-inside: avoid; }
        
        /* Lógica de Borda/Margem:
           Usamos padding no container principal e margin-bottom nos itens.
           O html2pdf cuida da quebra física.
        */

        /* === MODELO 1: CLÁSSICO (Serifado, Tradicional) === */
        .template-classic { font-family: 'Merriweather', serif; color: #333; line-height: 1.6; }
        .template-classic h1 { font-size: 24pt; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; text-transform: uppercase; text-align: center; }
        .template-classic h2 { font-size: 14pt; margin-top: 20px; margin-bottom: 10px; border-bottom: 1px solid #ccc; font-weight: bold; }
        .template-classic .contact-info { text-align: center; font-size: 10pt; margin-bottom: 20px; }
        .template-classic .job-item, .template-classic .edu-item { margin-bottom: 15px; }
        .template-classic .job-title { font-weight: bold; font-size: 12pt; }
        .template-classic .job-date { float: right; font-style: italic; font-size: 10pt; }
        
        /* === MODELO 2: MODERNO (Barra Lateral Esquerda) === */
        .template-modern { font-family: 'Roboto', sans-serif; color: #444; display: flex; flex-direction: row; height: 100%; }
        .template-modern .sidebar { width: 30%; background-color: #2c3e50; color: white; padding: 15px; margin: -15mm 0 -15mm -15mm; min-height: 297mm; }
        .template-modern .main-content { width: 70%; padding-left: 20px; }
        .template-modern h1 { font-size: 28pt; color: #2c3e50; margin-bottom: 5px; line-height: 1; }
        .template-modern h2 { font-size: 14pt; color: #2980b9; margin-top: 25px; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; }
        .template-modern .sidebar h2 { color: #ecf0f1; border-bottom: 1px solid #ecf0f1; font-size: 12pt; margin-top: 20px; }
        .template-modern .contact-item { font-size: 9pt; margin-bottom: 8px; word-break: break-all; }
        .template-modern .job-title { font-weight: 700; color: #333; }
        
        /* === MODELO 3: EXECUTIVO (Azul Forte, Cabeçalho Marcante) === */
        .template-executive { font-family: 'Montserrat', sans-serif; color: #1a202c; }
        .template-executive .header-bg { background-color: #1e3a8a; color: white; margin: -15mm -15mm 20px -15mm; padding: 20mm 15mm 10mm 15mm; }
        .template-executive h1 { font-size: 26pt; font-weight: 700; text-transform: uppercase; }
        .template-executive h2 { font-size: 13pt; color: #1e3a8a; border-left: 4px solid #1e3a8a; padding-left: 10px; margin-top: 25px; margin-bottom: 15px; font-weight: 700; text-transform: uppercase; }
        .template-executive .job-item { background: #f8fafc; padding: 10px; border-left: 2px solid #cbd5e1; margin-bottom: 15px; }

        /* --- Assinatura do Criador --- */
        .creator-signature {
            position: absolute;
            bottom: 10mm; /* Posicionado na margem inferior */
            right: 15mm;  /* Alinhado com a margem direita padrão */
            font-size: 8pt;
            color: #a0aec0; /* Cinza discreto */
            font-family: 'Inter', sans-serif;
            z-index: 50; /* Garantir que fique sobre outros elementos se houver sobreposição na margem */
        }
        .creator-signature a {
            color: #718096;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s;
        }
        .creator-signature a:hover {
            color: #2b6cb0; /* Azul discreto ao passar o mouse */
        }

        /* --- Scrollbars Personalizadas --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        @media print {
            body * { visibility: hidden; }
            #preview-area, #preview-area * { visibility: visible; }
            #preview-area { position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 0; box-shadow: none; }
            .a4-container { box-shadow: none; margin: 0; width: 100%; max-width: 100%; }
            /* Esconde a assinatura na impressão nativa do browser */
            .creator-signature { display: none !important; }
        }
    </style>
</head>
<body class="flex flex-col md:flex-row h-screen">

    <!-- LADO ESQUERDO: Painel de Controle e Edição (DARK MODE) -->
    <aside class="w-full md:w-1/3 lg:w-1/4 bg-gray-900 border-r border-gray-800 flex flex-col z-10 shadow-2xl h-full">
        <!-- Header do Sidebar -->
        <div class="p-5 border-b border-gray-800 bg-gray-950 text-white flex justify-between items-center shadow-md">
            <h1 class="font-bold text-lg tracking-wide flex items-center">
                <span class="bg-blue-600 w-8 h-8 rounded-lg flex items-center justify-center mr-3 shadow-lg shadow-blue-500/30">
                    <i class="fas fa-file-invoice"></i>
                </span>
                CV Generator
            </h1>
            <button onclick="downloadPDF()" class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-2 rounded-md shadow-lg shadow-green-900/20 transition-all transform hover:scale-105 font-medium flex items-center gap-2">
                <i class="fas fa-download"></i> BAIXAR PDF
            </button>
        </div>

        <div class="flex-1 overflow-y-auto p-5 space-y-6">
            
            <!-- Seletor de Template -->
            <div class="bg-gray-800 p-4 rounded-xl border border-gray-700 shadow-sm">
                <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Modelo do Currículo</label>
                <div class="relative">
                    <select id="templateSelect" onchange="renderResume()" class="w-full p-2.5 bg-gray-900 border border-gray-600 rounded-lg text-sm text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none appearance-none">
                        <option value="classic">1. Clássico (Tradicional)</option>
                        <option value="modern">2. Moderno (Barra Lateral)</option>
                        <option value="executive">3. Executivo (Corporativo)</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                        <i class="fas fa-chevron-down text-xs"></i>
                    </div>
                </div>
            </div>

            <!-- Tabs de Navegação do Form -->
            <div class="flex border-b border-gray-700 text-sm">
                <button onclick="switchTab('personal')" id="tab-personal" class="flex-1 pb-2 border-b-2 font-medium transition-colors text-blue-400 border-blue-500">
                    <i class="fas fa-user mr-1"></i> Dados
                </button>
                <button onclick="switchTab('experience')" id="tab-experience" class="flex-1 pb-2 border-b-2 font-medium transition-colors text-gray-500 border-transparent hover:text-gray-300">
                    <i class="fas fa-briefcase mr-1"></i> Exp
                </button>
                <button onclick="switchTab('education')" id="tab-education" class="flex-1 pb-2 border-b-2 font-medium transition-colors text-gray-500 border-transparent hover:text-gray-300">
                    <i class="fas fa-graduation-cap mr-1"></i> Edu
                </button>
                <button onclick="switchTab('skills')" id="tab-skills" class="flex-1 pb-2 border-b-2 font-medium transition-colors text-gray-500 border-transparent hover:text-gray-300">
                    <i class="fas fa-star mr-1"></i> Hab
                </button>
            </div>

            <!-- Conteúdo das Tabs -->
            <div id="form-container" class="pt-2">
                <!-- 1. Dados Pessoais -->
                <div id="section-personal" class="space-y-4">
                    <div class="grid gap-4">
                        <input type="text" id="input-name" placeholder="Nome Completo" class="input-dark w-full p-3 rounded-lg text-sm" oninput="updateData()">
                        <input type="text" id="input-role" placeholder="Cargo Pretendido / Título" class="input-dark w-full p-3 rounded-lg text-sm" oninput="updateData()">
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <input type="email" id="input-email" placeholder="Email" class="input-dark w-full p-3 rounded-lg text-sm" oninput="updateData()">
                        <input type="tel" id="input-phone" placeholder="Telefone" class="input-dark w-full p-3 rounded-lg text-sm" oninput="updateData()">
                    </div>
                    <input type="text" id="input-address" placeholder="Cidade, Estado" class="input-dark w-full p-3 rounded-lg text-sm" oninput="updateData()">
                    <input type="text" id="input-linkedin" placeholder="LinkedIn / Portfolio" class="input-dark w-full p-3 rounded-lg text-sm" oninput="updateData()">
                    <textarea id="input-summary" placeholder="Resumo Profissional (Breve descrição sobre você...)" class="input-dark w-full p-3 rounded-lg text-sm h-32 resize-none" oninput="updateData()"></textarea>
                </div>

                <!-- 2. Experiência -->
                <div id="section-experience" class="hidden space-y-4">
                    <div id="experience-list" class="space-y-3"></div>
                    <button onclick="addExperience()" class="w-full py-3 border border-dashed border-gray-600 text-gray-400 rounded-lg hover:bg-gray-800 hover:text-white hover:border-gray-500 text-sm font-medium transition-all group">
                        <i class="fas fa-plus-circle mr-1 group-hover:text-blue-400"></i> Adicionar Experiência
                    </button>
                </div>

                <!-- 3. Educação -->
                <div id="section-education" class="hidden space-y-4">
                    <div id="education-list" class="space-y-3"></div>
                    <button onclick="addEducation()" class="w-full py-3 border border-dashed border-gray-600 text-gray-400 rounded-lg hover:bg-gray-800 hover:text-white hover:border-gray-500 text-sm font-medium transition-all group">
                        <i class="fas fa-plus-circle mr-1 group-hover:text-blue-400"></i> Adicionar Educação
                    </button>
                </div>

                <!-- 4. Habilidades -->
                <div id="section-skills" class="hidden space-y-4">
                    <div>
                        <label class="text-xs text-gray-400 mb-1 block">Habilidades Técnicas (separar por vírgula)</label>
                        <textarea id="input-skills" placeholder="Ex: Gestão de Projetos, HTML, CSS, Liderança..." class="input-dark w-full p-3 rounded-lg h-24 text-sm resize-none" oninput="updateData()"></textarea>
                    </div>
                    
                    <div>
                        <label class="text-xs text-gray-400 mb-1 block mt-2">Idiomas</label>
                        <textarea id="input-languages" placeholder="Ex: Inglês Avançado, Espanhol Básico" class="input-dark w-full p-3 rounded-lg h-20 text-sm resize-none" oninput="updateData()"></textarea>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="p-3 text-center text-xs text-gray-500 bg-gray-950 border-t border-gray-800">
            <i class="fas fa-save mr-1"></i> Salvamento automático ativado
        </div>
    </aside>

    <!-- LADO DIREITO: Preview A4 (Fundo Escuro para contraste) -->
    <main class="flex-1 bg-gray-800 overflow-auto p-4 md:p-8 flex justify-center items-start relative">
        <!-- Fundo sutil texturizado opcional ou gradiente -->
        <div class="absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 z-0"></div>

        <div id="preview-area" class="transform origin-top scale-90 md:scale-100 transition-transform duration-200 z-10 shadow-2xl">
            <!-- O Currículo será renderizado aqui -->
            <div id="resume-content" class="a4-container template-classic">
                <!-- Conteúdo Injetado via JS -->
            </div>
        </div>
    </main>

    <script>
        // --- Estado Inicial ---
        let resumeData = {
            name: "Seu Nome Completo",
            role: "Profissão / Cargo",
            email: "email@exemplo.com",
            phone: "(11) 99999-9999",
            address: "São Paulo, SP",
            linkedin: "linkedin.com/in/seunome",
            summary: "Profissional dedicado com mais de 5 anos de experiência em gestão e desenvolvimento. Focado em resultados e otimização de processos.",
            skills: "Microsoft Office, Liderança de Equipes, Gestão de Tempo, Comunicação Eficaz, Planejamento Estratégico",
            languages: "Português (Nativo), Inglês (Avançado)",
            experience: [
                { id: 1, title: "Gerente de Projetos", company: "Empresa ABC", date: "Jan 2020 - Presente", description: "Liderança de equipe de 10 pessoas, responsável pelo aumento de 20% na produtividade. Gestão de orçamento e cronogramas." },
                { id: 2, title: "Analista Sênior", company: "Corporação XYZ", date: "Mar 2017 - Dez 2019", description: "Desenvolvimento de estratégias de vendas e suporte direto à diretoria. Implementação de novo sistema CRM." }
            ],
            education: [
                { id: 1, degree: "MBA em Gestão Empresarial", school: "Fundação Getúlio Vargas", date: "2018 - 2020", description: "Foco em finanças corporativas e liderança." },
                { id: 2, degree: "Bacharelado em Administração", school: "Universidade de São Paulo", date: "2013 - 2017", description: "" }
            ]
        };

        // --- Gerenciamento de Tabs ---
        function switchTab(tabName) {
            // Esconder todas as seções
            ['personal', 'experience', 'education', 'skills'].forEach(t => {
                document.getElementById(`section-${t}`).classList.add('hidden');
                // Reset tab style
                const tabBtn = document.getElementById(`tab-${t}`);
                tabBtn.classList.remove('text-blue-400', 'border-blue-500');
                tabBtn.classList.add('text-gray-500', 'border-transparent');
            });

            // Mostrar a selecionada
            document.getElementById(`section-${tabName}`).classList.remove('hidden');
            // Active tab style
            const activeBtn = document.getElementById(`tab-${tabName}`);
            activeBtn.classList.add('text-blue-400', 'border-blue-500');
            activeBtn.classList.remove('text-gray-500', 'border-transparent');
        }

        // --- Funções de Lista (Exp e Edu) ---
        function renderFormLists() {
            // Experiência (Atualizado para Dark Mode)
            const expList = document.getElementById('experience-list');
            expList.innerHTML = '';
            resumeData.experience.forEach((job, index) => {
                const div = document.createElement('div');
                div.className = "bg-gray-800 p-4 border border-gray-700 rounded-lg shadow-sm relative group hover:border-gray-600 transition-colors";
                div.innerHTML = `
                    <button onclick="removeitem('experience', ${index})" class="absolute top-2 right-2 text-gray-500 hover:text-red-400 transition-colors"><i class="fas fa-trash"></i></button>
                    <input type="text" class="w-full text-sm font-bold bg-transparent border-b border-gray-700 mb-2 focus:outline-none focus:border-blue-500 text-white placeholder-gray-500" value="${job.title}" placeholder="Cargo" onchange="updateListItem('experience', ${index}, 'title', this.value)">
                    <div class="flex gap-3 mb-2">
                        <input type="text" class="w-1/2 text-xs bg-transparent border-b border-gray-700 focus:outline-none focus:border-blue-500 text-gray-300 placeholder-gray-600" value="${job.company}" placeholder="Empresa" onchange="updateListItem('experience', ${index}, 'company', this.value)">
                        <input type="text" class="w-1/2 text-xs bg-transparent border-b border-gray-700 focus:outline-none focus:border-blue-500 text-gray-300 placeholder-gray-600" value="${job.date}" placeholder="Data" onchange="updateListItem('experience', ${index}, 'date', this.value)">
                    </div>
                    <textarea class="w-full text-xs bg-gray-900/50 border border-gray-700 rounded p-2 h-16 text-gray-300 focus:outline-none focus:border-blue-500 resize-none" placeholder="Descrição" onchange="updateListItem('experience', ${index}, 'description', this.value)">${job.description}</textarea>
                `;
                expList.appendChild(div);
            });

            // Educação (Atualizado para Dark Mode)
            const eduList = document.getElementById('education-list');
            eduList.innerHTML = '';
            resumeData.education.forEach((edu, index) => {
                const div = document.createElement('div');
                div.className = "bg-gray-800 p-4 border border-gray-700 rounded-lg shadow-sm relative group hover:border-gray-600 transition-colors";
                div.innerHTML = `
                    <button onclick="removeitem('education', ${index})" class="absolute top-2 right-2 text-gray-500 hover:text-red-400 transition-colors"><i class="fas fa-trash"></i></button>
                    <input type="text" class="w-full text-sm font-bold bg-transparent border-b border-gray-700 mb-2 focus:outline-none focus:border-blue-500 text-white placeholder-gray-500" value="${edu.degree}" placeholder="Curso/Grau" onchange="updateListItem('education', ${index}, 'degree', this.value)">
                    <div class="flex gap-3">
                        <input type="text" class="w-1/2 text-xs bg-transparent border-b border-gray-700 focus:outline-none focus:border-blue-500 text-gray-300 placeholder-gray-600" value="${edu.school}" placeholder="Instituição" onchange="updateListItem('education', ${index}, 'school', this.value)">
                        <input type="text" class="w-1/2 text-xs bg-transparent border-b border-gray-700 focus:outline-none focus:border-blue-500 text-gray-300 placeholder-gray-600" value="${edu.date}" placeholder="Ano" onchange="updateListItem('education', ${index}, 'date', this.value)">
                    </div>
                `;
                eduList.appendChild(div);
            });
        }

        function updateListItem(type, index, field, value) {
            resumeData[type][index][field] = value;
            renderResume();
        }

        function addExperience() {
            resumeData.experience.push({ title: "Novo Cargo", company: "Empresa", date: "2023 - Atual", description: "Descrição das atividades..." });
            renderFormLists();
            renderResume();
            switchTab('experience'); // manter foco
        }

        function addEducation() {
            resumeData.education.push({ degree: "Novo Curso", school: "Instituição", date: "2023", description: "" });
            renderFormLists();
            renderResume();
            switchTab('education');
        }

        function removeitem(type, index) {
            resumeData[type].splice(index, 1);
            renderFormLists();
            renderResume();
        }

        function updateData() {
            resumeData.name = document.getElementById('input-name').value || "Seu Nome";
            resumeData.role = document.getElementById('input-role').value || "";
            resumeData.email = document.getElementById('input-email').value || "";
            resumeData.phone = document.getElementById('input-phone').value || "";
            resumeData.address = document.getElementById('input-address').value || "";
            resumeData.linkedin = document.getElementById('input-linkedin').value || "";
            resumeData.summary = document.getElementById('input-summary').value || "";
            resumeData.skills = document.getElementById('input-skills').value || "";
            resumeData.languages = document.getElementById('input-languages').value || "";
            renderResume();
        }

        // --- Inicializar Campos com Dados Padrão ---
        function initInputs() {
            document.getElementById('input-name').value = resumeData.name;
            document.getElementById('input-role').value = resumeData.role;
            document.getElementById('input-email').value = resumeData.email;
            document.getElementById('input-phone').value = resumeData.phone;
            document.getElementById('input-address').value = resumeData.address;
            document.getElementById('input-linkedin').value = resumeData.linkedin;
            document.getElementById('input-summary').value = resumeData.summary;
            document.getElementById('input-skills').value = resumeData.skills;
            document.getElementById('input-languages').value = resumeData.languages;
            renderFormLists();
        }

        // --- RENDERIZADORES DE TEMPLATE ---
        
        function renderResume() {
            const templateId = document.getElementById('templateSelect').value;
            const container = document.getElementById('resume-content');
            
            // Limpar classes antigas e adicionar a nova
            container.className = `a4-container template-${templateId}`;
            
            let html = '';

            // Helper para gerar lista de skills
            const skillsArray = resumeData.skills.split(',').map(s => s.trim()).filter(s => s);
            const skillsList = skillsArray.map(s => `<span class="inline-block bg-gray-200 rounded px-2 py-1 text-xs mr-1 mb-1">${s}</span>`).join('');

            // --- Lógica de Renderização por Template ---
            
            if (templateId === 'classic') {
                html = `
                    <h1>${resumeData.name}</h1>
                    <div class="contact-info">
                        ${resumeData.address} | ${resumeData.phone} | ${resumeData.email} <br>
                        ${resumeData.linkedin}
                    </div>

                    <h2>Resumo Profissional</h2>
                    <p>${resumeData.summary}</p>

                    <h2>Experiência Profissional</h2>
                    ${resumeData.experience.map(job => `
                        <div class="job-item no-break">
                            <div class="job-title">${job.title} <span class="job-date">${job.date}</span></div>
                            <div style="font-style:italic; margin-bottom:5px;">${job.company}</div>
                            <p>${job.description.replace(/\n/g, '<br>')}</p>
                        </div>
                    `).join('')}

                    <h2>Educação</h2>
                    ${resumeData.education.map(edu => `
                        <div class="edu-item no-break">
                            <strong>${edu.degree}</strong>, ${edu.school} (${edu.date})
                        </div>
                    `).join('')}

                    <h2>Habilidades & Idiomas</h2>
                    <p><strong>Habilidades:</strong> ${resumeData.skills}</p>
                    <p><strong>Idiomas:</strong> ${resumeData.languages}</p>
                `;
            } 
            else if (templateId === 'modern') {
                html = `
                    <div class="sidebar">
                        <div style="text-align:center; margin-bottom:20px;">
                            <div style="width:100px; height:100px; background:#fff; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; color:#2c3e50; font-size:30pt; font-weight:bold;">
                                ${resumeData.name.charAt(0)}
                            </div>
                        </div>
                        <h2>Contato</h2>
                        <div class="contact-item"><i class="fas fa-envelope me-2"></i> ${resumeData.email}</div>
                        <div class="contact-item"><i class="fas fa-phone me-2"></i> ${resumeData.phone}</div>
                        <div class="contact-item"><i class="fas fa-map-marker-alt me-2"></i> ${resumeData.address}</div>
                        
                        <h2>Habilidades</h2>
                        <div style="font-size:9pt; line-height:1.6;">
                            ${skillsArray.map(s => `<div style="margin-bottom:4px;">• ${s}</div>`).join('')}
                        </div>

                        <h2>Idiomas</h2>
                        <p style="font-size:9pt;">${resumeData.languages}</p>
                    </div>
                    <div class="main-content">
                        <h1>${resumeData.name}</h1>
                        <div style="font-size:14pt; color:#7f8c8d; margin-bottom:20px;">${resumeData.role}</div>
                        <p>${resumeData.summary}</p>

                        <h2>Experiência</h2>
                        ${resumeData.experience.map(job => `
                            <div class="no-break" style="margin-bottom:20px;">
                                <div class="job-title">${job.title}</div>
                                <div style="color:#7f8c8d; font-size:10pt; margin-bottom:5px;">${job.company} | ${job.date}</div>
                                <p style="font-size:10pt;">${job.description}</p>
                            </div>
                        `).join('')}

                        <h2>Educação</h2>
                        ${resumeData.education.map(edu => `
                            <div class="no-break" style="margin-bottom:10px;">
                                <strong>${edu.degree}</strong><br>
                                <span style="color:#7f8c8d; font-size:10pt;">${edu.school}, ${edu.date}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            else if (templateId === 'executive') {
                html = `
                    <div class="header-bg">
                        <h1>${resumeData.name}</h1>
                        <div style="margin-top:10px; font-size:11pt; opacity:0.9;">${resumeData.role}</div>
                        <div style="margin-top:15px; font-size:9pt; border-top:1px solid rgba(255,255,255,0.3); padding-top:10px; display:flex; gap:20px;">
                            <span>${resumeData.email}</span>
                            <span>${resumeData.phone}</span>
                            <span>${resumeData.address}</span>
                        </div>
                    </div>

                    <h2>Perfil Profissional</h2>
                    <p>${resumeData.summary}</p>

                    <h2>Histórico Profissional</h2>
                    ${resumeData.experience.map(job => `
                        <div class="job-item no-break">
                            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                                <span style="font-weight:bold; color:#1e3a8a;">${job.title}</span>
                                <span style="font-size:9pt; font-weight:bold;">${job.date}</span>
                            </div>
                            <div style="font-size:10pt; margin-bottom:5px; font-style:italic;">${job.company}</div>
                            <p style="font-size:10pt;">${job.description}</p>
                        </div>
                    `).join('')}

                    <div style="display:flex; gap:20px; margin-top:20px;">
                        <div style="width:60%;">
                            <h2>Formação Acadêmica</h2>
                            ${resumeData.education.map(edu => `
                                <div class="no-break" style="margin-bottom:10px;">
                                    <strong>${edu.degree}</strong><br>
                                    <span style="font-size:10pt;">${edu.school} | ${edu.date}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div style="width:40%;">
                            <h2>Competências</h2>
                            <p style="font-size:10pt;">${resumeData.skills}</p>
                        </div>
                    </div>
                `;
            }

            // --- Adicionar Assinatura no Rodapé (NOVO) ---
            // CORRIGIDO: Adicionado atributo data-html2canvas-ignore para esconder do PDF gerado
            html += `
                <div class="creator-signature" data-html2canvas-ignore="true">
                    Criado por <a href=https://tiagopinheiro8080.github.io/ target="_blank" title="Portfólio de Tiago Pinheiro — Desenvolvedor Web">Tiago Pinheiro</a>
                </div>
            `;

            container.innerHTML = html;
        }

        // --- Geração de PDF ---
        function downloadPDF() {
            const element = document.getElementById('resume-content');
            
            // Configuração para qualidade máxima e respeito às margens A4
            const opt = {
                margin:       0, // Margem zero pois o container já tem padding interno
                filename:     `Curriculo-${resumeData.name.replace(/\s+/g, '_')}.pdf`,
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2, useCORS: true }, // Scale 2 para alta resolução
                jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
                // Configuração crucial para quebra de página inteligente
                pagebreak:    { mode: ['avoid-all', 'css', 'legacy'] }
            };

            // Feedback visual
            const btn = document.querySelector('button[onclick="downloadPDF()"]');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Gerando...';
            
            html2pdf().set(opt).from(element).save().then(() => {
                btn.innerHTML = originalText;
            });
        }

        // Inicializar
        initInputs();
    </script>
</body>
</html>